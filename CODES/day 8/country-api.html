<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Country Fact Finder</title>
    <!-- Tailwind CSS CDN for easy styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            font-family: "Inter", sans-serif;
        }
        .container {
            max-width: 900px; 
        }
    </style>
</head>
<body class="bg-gray-100 min-h-screen flex items-center justify-center p-4">
    <div class="container bg-white p-8 rounded-lg shadow-xl w-full">
        <h1 class="text-4xl font-extrabold text-center text-indigo-800 mb-8 rounded-md bg-indigo-100 p-4">
            Country Fact Finder ðŸŒŽ
        </h1>

        <!-- Search Input Section -->
        <div class="flex flex-col sm:flex-row items-center justify-center gap-4 mb-8">
            <input
                type="text"
                id="countryInput"
                placeholder="Enter country name (e.g., India)"
                class="w-full sm:w-2/3 p-3 border-2 border-indigo-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 text-lg shadow-sm"
            />
            <button
                id="searchButton"
                class="w-full sm:w-1/3 bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 px-6 rounded-lg shadow-md transition duration-300 ease-in-out transform hover:scale-105 text-lg"
            >
                Search Country
            </button>
        </div>

        <!-- Loading Indicator -->
        <div id="loadingIndicator" class="hidden text-center text-indigo-600 text-lg font-medium mb-4">
            Loading country data...
        </div>

        <!-- Error Message Display -->
        <div id="errorMessage" class="hidden bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded-lg relative mb-4">
            <strong class="font-bold">Error!</strong>
            <span class="block sm:inline" id="errorText">Something went wrong.</span>
        </div>

        <!-- Country Info Display Section -->
        <div id="countryInfo" class="hidden grid grid-cols-1 md:grid-cols-2 gap-8 text-gray-800">
            <!-- Flag Display -->
            <div class="md:col-span-2 flex flex-col items-center justify-center mb-6">
                <img id="countryFlag" src="" alt="Country Flag" class="max-w-xs h-auto rounded-lg shadow-lg border border-gray-200" onerror="this.onerror=null;this.src='https://placehold.co/320x200/cccccc/333333?text=No+Flag';" />
                <p class="text-sm text-gray-500 mt-2">Flag of <span id="flagCountryName" class="font-semibold"></span></p>
            </div>

            <!-- Basic Info -->
            <div>
                <h2 class="text-2xl font-bold text-indigo-700 mb-4 pb-2 border-b border-indigo-200">Basic Information</h2>
                <p><strong class="font-semibold">Common Name:</strong> <span id="commonName"></span></p>
                <p><strong class="font-semibold">Official Name:</strong> <span id="officialName"></span></p>
                <p><strong class="font-semibold">Capital:</strong> <span id="capital"></span></p>
                <p><strong class="font-semibold">Region:</strong> <span id="region"></span></p>
                <p><strong class="font-semibold">Subregion:</strong> <span id="subregion"></span></p>
            </div>

            <!-- Demographics & Economy -->
            <div>
                <h2 class="text-2xl font-bold text-indigo-700 mb-4 pb-2 border-b border-indigo-200">Demographics & Economy</h2>
                <p><strong class="font-semibold">Population:</strong> <span id="population"></span></p>
                <p><strong class="font-semibold">Area:</strong> <span id="area"></span> sq km</p>
                <p><strong class="font-semibold">Currencies:</strong> <span id="currencies"></span></p>
                <p><strong class="font-semibold">Languages:</strong> <span id="languages"></span></p>
            </div>
        </div>
    </div>

    <script>
        // Get references to HTML elements
        const countryInput = document.getElementById('countryInput');
        const searchButton = document.getElementById('searchButton');
        const loadingIndicator = document.getElementById('loadingIndicator');
        const errorMessage = document.getElementById('errorMessage');
        const errorText = document.getElementById('errorText');
        const countryInfoDiv = document.getElementById('countryInfo');

        const countryFlag = document.getElementById('countryFlag');
        const flagCountryName = document.getElementById('flagCountryName');
        const commonName = document.getElementById('commonName');
        const officialName = document.getElementById('officialName');
        const capital = document.getElementById('capital');
        const region = document.getElementById('region');
        const subregion = document.getElementById('subregion');
        const population = document.getElementById('population');
        const area = document.getElementById('area');
        const currencies = document.getElementById('currencies');
        const languages = document.getElementById('languages');

        // Function to display an error message
        function displayError(message) {
            errorMessage.classList.remove('hidden');
            errorText.textContent = message;
            countryInfoDiv.classList.add('hidden'); // Hide info if error occurs
            loadingIndicator.classList.add('hidden'); // Hide loading if error
        }

        // Function to hide error and loading messages
        function hideMessages() {
            errorMessage.classList.add('hidden');
            loadingIndicator.classList.add('hidden');
        }

        // Function to format numbers with commas
        function formatNumber(num) {
            return num.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
        }

        // Function to fetch country information
        async function getCountryInfoWeb() {
            const countryName = countryInput.value.trim(); // Get and trim input value
            if (!countryName) {
                displayError("Please enter a country name.");
                return;
            }

            hideMessages(); // Clear previous messages
            loadingIndicator.classList.remove('hidden'); // Show loading indicator
            countryInfoDiv.classList.add('hidden'); // Hide previous info

            const base_url = "https://restcountries.com/v3.1/name/";
            const api_url = `${base_url}${countryName}?fullText=true`;

            try {
                // Use fetch API for making HTTP requests in JavaScript
                const response = await fetch(api_url);

                if (!response.ok) { // Check for HTTP errors (e.g., 404, 500)
                    if (response.status === 404) {
                        displayError(`Country '${countryName}' not found. Please check the spelling.`);
                    } else {
                        const errorData = await response.json();
                        displayError(`Error fetching data: ${response.status} - ${errorData.message || response.statusText}`);
                    }
                    return;
                }

                const data = await response.json();

                if (data.length > 0) {
                    const country_data = data[0]; // Get the first matching country

                    // Extract and display information
                    commonName.textContent = country_data.name?.common || 'N/A';
                    officialName.textContent = country_data.name?.official || 'N/A';
                    capital.textContent = country_data.capital?.[0] || 'N/A'; // Capital is an array
                    region.textContent = country_data.region || 'N/A';
                    subregion.textContent = country_data.subregion || 'N/A';
                    population.textContent = country_data.population ? formatNumber(country_data.population) : 'N/A';
                    area.textContent = country_data.area ? formatNumber(country_data.area) : 'N/A';

                    // Handle currencies
                    const currenciesObj = country_data.currencies;
                    let currencyInfo = [];
                    if (currenciesObj) {
                        for (const code in currenciesObj) {
                            currencyInfo.push(`${currenciesObj[code].name} (${currenciesObj[code].symbol})`);
                        }
                    }
                    currencies.textContent = currencyInfo.join(", ") || 'N/A';

                    // Handle languages
                    const languagesObj = country_data.languages;
                    const languageNames = languagesObj ? Object.values(languagesObj) : [];
                    languages.textContent = languageNames.join(", ") || 'N/A';

                    // Set flag image, with a fallback if the image fails to load
                    countryFlag.src = country_data.flags?.svg || country_data.flags?.png || 'https://placehold.co/320x200/cccccc/333333?text=No+Flag';
                    countryFlag.alt = `Flag of ${country_data.name?.common || 'Unknown Country'}`;
                    flagCountryName.textContent = country_data.name?.common || 'Unknown Country';

                    countryInfoDiv.classList.remove('hidden'); // Show the info section
                } else {
                    displayError(`No information found for '${countryName}'. Please check the spelling.`);
                }
            } catch (error) {
                // Catch network errors or issues with response parsing
                console.error("Fetch error:", error);
                displayError("An error occurred while fetching data. Please try again.");
            } finally {
                loadingIndicator.classList.add('hidden'); // Hide loading indicator
            }
        }

        // Event listener for the search button
        searchButton.addEventListener('click', getCountryInfoWeb);

        // Event listener for pressing Enter in the input field
        countryInput.addEventListener('keypress', (event) => {
            if (event.key === 'Enter') {
                getCountryInfoWeb();
            }
        });

        // Initialize with a default country (optional)
        window.onload = () => {
             countryInput.value = "India"; // Set default search to India
             getCountryInfoWeb(); // Automatically search on page load
        };
    </script>
</body>
</html>
